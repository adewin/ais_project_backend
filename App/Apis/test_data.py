# 使用 flask_restful 模块
from flask import Blueprint, request, jsonify
from flask_restful import reqparse, Api, Resource, abort
from datetime import datetime
from sqlalchemy import and_, or_
from App.Models.models import ShipInfo, Pos
from App.Controllers.calc import dbscan_calc,dbscan_bmap
from App.Controllers.tools import intToCoordinate, CoordinateToInt

test_data = Blueprint('test_data', __name__)
api_data= Api(test_data)


class Hello(Resource):
    def get(self):
        res = [ { "value": 0, "lnglat": [ { "lng": "121.067833", "lat": "39.540667" }, { "lng": "121.081567", "lat": "39.59213" }, { "lng": "121.073707", "lat": "39.583658" }, { "lng": "121.097967", "lat": "39.416258" }, { "lng": "121.068865", "lat": "39.578468" }, { "lng": "121.09817", "lat": "39.538495" }, { "lng": "121.092718", "lat": "39.413552" }, { "lng": "121.095658", "lat": "39.533368" }, { "lng": "121.087527", "lat": "39.411312" }, { "lng": "121.091988", "lat": "39.52714" }, { "lng": "121.082308", "lat": "39.409158" }, { "lng": "121.08942", "lat": "39.522033" }, { "lng": "121.077002", "lat": "39.407025" }, { "lng": "121.08644", "lat": "39.516678" }, { "lng": "121.071642", "lat": "39.405072" }, { "lng": "121.083602", "lat": "39.511285" }, { "lng": "121.066557", "lat": "39.403293" }, { "lng": "121.08064", "lat": "39.505438" }, { "lng": "121.077083", "lat": "39.5731" }, { "lng": "121.077642", "lat": "39.500213" }, { "lng": "121.0743", "lat": "39.49404" }, { "lng": "121.070955", "lat": "39.488878" }, { "lng": "121.067995", "lat": "39.483123" }, { "lng": "121.066883", "lat": "39.551883" }, { "lng": "121.065135", "lat": "39.477867" }, { "lng": "121.084047", "lat": "39.584207" }, { "lng": "121.079698", "lat": "39.578653" }, { "lng": "121.076068", "lat": "39.573463" }, { "lng": "121.071405", "lat": "39.566638" }, { "lng": "121.066042", "lat": "39.574537" }, { "lng": "121.067303", "lat": "39.56102" }, { "lng": "121.068173", "lat": "39.579832" }, { "lng": "121.072113", "lat": "39.589847" }, { "lng": "121.074383", "lat": "39.595827" }, { "lng": "121.065287", "lat": "39.570147" }, { "lng": "121.07675", "lat": "39.601767" }, { "lng": "121.069642", "lat": "39.575485" }, { "lng": "121.080065", "lat": "39.610188" }, { "lng": "121.073968", "lat": "39.580798" }, { "lng": "121.079472", "lat": "39.58774" }, { "lng": "121.084177", "lat": "39.593682" }, { "lng": "121.088865", "lat": "39.599595" }, { "lng": "121.093538", "lat": "39.60551" }, { "lng": "121.066142", "lat": "39.522248" }, { "lng": "121.068873", "lat": "39.5278" }, { "lng": "121.071368", "lat": "39.532842" }, { "lng": "121.099885", "lat": "39.46288" }, { "lng": "121.073858", "lat": "39.537905" }, { "lng": "121.098015", "lat": "39.457635" }, { "lng": "121.07659", "lat": "39.543327" }, { "lng": "121.07913", "lat": "39.548383" }, { "lng": "121.096222", "lat": "39.4524" }, { "lng": "121.081877", "lat": "39.553873" }, { "lng": "121.09444", "lat": "39.447252" }, { "lng": "121.084653", "lat": "39.55942" }, { "lng": "121.092652", "lat": "39.441978" }, { "lng": "121.08716", "lat": "39.564443" }, { "lng": "121.089728", "lat": "39.569567" }, { "lng": "121.090748", "lat": "39.436362" }, { "lng": "121.092603", "lat": "39.575263" }, { "lng": "121.088972", "lat": "39.431095" }, { "lng": "121.095143", "lat": "39.580292" }, { "lng": "121.097742", "lat": "39.58546" }, { "lng": "121.087173", "lat": "39.42581" }, { "lng": "121.100307", "lat": "39.590537" }, { "lng": "121.085362", "lat": "39.420633" }, { "lng": "121.083583", "lat": "39.415557" }, { "lng": "121.081877", "lat": "39.410207" }, { "lng": "121.066135", "lat": "39.537347" }, { "lng": "121.080055", "lat": "39.40499" }, { "lng": "121.06806", "lat": "39.54273" }, { "lng": "121.078202", "lat": "39.399322" }, { "lng": "121.07075", "lat": "39.549177" }, { "lng": "121.073252", "lat": "39.555053" }, { "lng": "121.076455", "lat": "39.394183" }, { "lng": "121.07545", "lat": "39.560433" }, { "lng": "121.074683", "lat": "39.388815" }, { "lng": "121.079575", "lat": "39.570085" }, { "lng": "121.084548", "lat": "39.581302" }, { "lng": "121.0984", "lat": "39.601828" }, { "lng": "121.08289", "lat": "39.50687" }, { "lng": "121.073423", "lat": "39.509588" }, { "lng": "121.068213", "lat": "39.523772" }, { "lng": "121.067055", "lat": "39.511477" }, { "lng": "121.07138", "lat": "39.528998" }, { "lng": "121.074873", "lat": "39.53474" }, { "lng": "121.078383", "lat": "39.540493" }, { "lng": "121.082513", "lat": "39.547265" }, { "lng": "121.08727", "lat": "39.55513" }, { "lng": "121.092267", "lat": "39.563452" }, { "lng": "121.095777", "lat": "39.569118" }, { "lng": "121.099052", "lat": "39.574447" }, { "lng": "121.065563", "lat": "39.501813" }, { "lng": "121.068625", "lat": "39.507248" }, { "lng": "121.071728", "lat": "39.512932" }, { "lng": "121.074657", "lat": "39.617585" }, { "lng": "121.074683", "lat": "39.518553" }, { "lng": "121.077692", "lat": "39.524162" }, { "lng": "121.080543", "lat": "39.529318" }, { "lng": "121.083415", "lat": "39.534557" }, { "lng": "121.08634", "lat": "39.539745" }, { "lng": "121.089245", "lat": "39.544942" }, { "lng": "121.092213", "lat": "39.550105" }, { "lng": "121.094952", "lat": "39.555177" }, { "lng": "121.097835", "lat": "39.560188" }, { "lng": "121.066382", "lat": "39.509468" }, { "lng": "121.100915", "lat": "39.565673" }, { "lng": "121.069048", "lat": "39.514787" }, { "lng": "121.07179", "lat": "39.520225" }, { "lng": "121.074452", "lat": "39.525445" }, { "lng": "121.077123", "lat": "39.530767" }, { "lng": "121.079892", "lat": "39.536235" }, { "lng": "121.082542", "lat": "39.541473" }, { "lng": "121.08526", "lat": "39.54682" }, { "lng": "121.088832", "lat": "39.55379" }, { "lng": "121.092168", "lat": "39.560258" }, { "lng": "121.095555", "lat": "39.566685" }, { "lng": "121.100138", "lat": "39.57453" }, { "lng": "121.096542", "lat": "39.620612" }, { "lng": "121.09263", "lat": "39.613478" }, { "lng": "121.089613", "lat": "39.608002" }, { "lng": "121.085955", "lat": "39.601327" }, { "lng": "121.083067", "lat": "39.596162" }, { "lng": "121.08001", "lat": "39.590587" }, { "lng": "121.076963", "lat": "39.58512" }, { "lng": "121.072287", "lat": "39.576567" }, { "lng": "121.068857", "lat": "39.570373" }, { "lng": "121.066038", "lat": "39.565148" }, { "lng": "121.099073", "lat": "39.4967" }, { "lng": "121.093842", "lat": "39.498058" }, { "lng": "121.088572", "lat": "39.499357" }, { "lng": "121.08328", "lat": "39.500777" }, { "lng": "121.077952", "lat": "39.502232" }, { "lng": "121.072428", "lat": "39.503707" }, { "lng": "121.066568", "lat": "39.505132" }, { "lng": "121.082003", "lat": "39.500907" }, { "lng": "121.075973", "lat": "39.502523" }, { "lng": "121.069915", "lat": "39.504222" }, { "lng": "121.0992", "lat": "39.5958" }, { "lng": "121.09735", "lat": "39.590733" }, { "lng": "121.0955", "lat": "39.585667" }, { "lng": "121.0937", "lat": "39.580467" }, { "lng": "121.091933", "lat": "39.575367" }, { "lng": "121.090167", "lat": "39.57035" }, { "lng": "121.08835", "lat": "39.565183" }, { "lng": "121.0865", "lat": "39.559967" }, { "lng": "121.066133", "lat": "39.545267" }, { "lng": "121.084767", "lat": "39.5549" }, { "lng": "121.0687", "lat": "39.552183" }, { "lng": "121.082883", "lat": "39.54965" }, { "lng": "121.071017", "lat": "39.557783" }, { "lng": "121.080833", "lat": "39.543933" }, { "lng": "121.07335", "lat": "39.563517" }, { "lng": "121.078983", "lat": "39.538617" }, { "lng": "121.07695", "lat": "39.532983" }, { "lng": "121.0758", "lat": "39.570283" }, { "lng": "121.074883", "lat": "39.527717" }, { "lng": "121.073", "lat": "39.5225" }, { "lng": "121.081117", "lat": "39.5842" }, { "lng": "121.071033", "lat": "39.5172" }, { "lng": "121.06915", "lat": "39.511933" }, { "lng": "121.066967", "lat": "39.50675" }, { "lng": "121.071807", "lat": "39.570748" }, { "lng": "121.067567", "lat": "39.48145" }, { "lng": "121.071115", "lat": "39.48715" }, { "lng": "121.090622", "lat": "39.582918" }, { "lng": "121.074283", "lat": "39.492217" }, { "lng": "121.0776", "lat": "39.497383" }, { "lng": "121.087245", "lat": "39.577038" }, { "lng": "121.080933", "lat": "39.502567" }, { "lng": "121.083968", "lat": "39.571565" }, { "lng": "121.0842", "lat": "39.507717" }, { "lng": "121.087467", "lat": "39.512867" }, { "lng": "121.080647", "lat": "39.565827" }, { "lng": "121.090933", "lat": "39.5182" }, { "lng": "121.076612", "lat": "39.558833" }, { "lng": "121.09435", "lat": "39.523517" }, { "lng": "121.09785", "lat": "39.52925" }, { "lng": "121.072245", "lat": "39.551348" }, { "lng": "121.069018", "lat": "39.545983" }, { "lng": "121.10005", "lat": "39.603988" }, { "lng": "121.0659", "lat": "39.540525" }, { "lng": "121.083728", "lat": "39.581135" }, { "lng": "121.078423", "lat": "39.573647" }, { "lng": "121.070682", "lat": "39.562787" }, { "lng": "121.065167", "lat": "39.400667" }, { "lng": "121.067", "lat": "39.405833" }, { "lng": "121.100465", "lat": "39.605538" }, { "lng": "121.0685", "lat": "39.411" }, { "lng": "121.097165", "lat": "39.600128" }, { "lng": "121.070333", "lat": "39.416833" }, { "lng": "121.072167", "lat": "39.422333" }, { "lng": "121.09161", "lat": "39.590697" }, { "lng": "121.073833", "lat": "39.4275" }, { "lng": "121.088135", "lat": "39.58385" }, { "lng": "121.0755", "lat": "39.432667" }, { "lng": "121.077333", "lat": "39.438" }, { "lng": "121.083137", "lat": "39.574708" }, { "lng": "121.080438", "lat": "39.56923" }, { "lng": "121.079167", "lat": "39.4435" }, { "lng": "121.077755", "lat": "39.563723" }, { "lng": "121.081", "lat": "39.449" }, { "lng": "121.083", "lat": "39.4545" }, { "lng": "121.072935", "lat": "39.554208" }, { "lng": "121.085", "lat": "39.460333" }, { "lng": "121.069443", "lat": "39.547463" }, { "lng": "121.086833", "lat": "39.4655" }, { "lng": "121.066988", "lat": "39.542443" }, { "lng": "121.088833", "lat": "39.471" }, { "lng": "121.090667", "lat": "39.476333" }, { "lng": "121.092333", "lat": "39.481833" }, { "lng": "121.06882", "lat": "39.518958" }, { "lng": "121.0945", "lat": "39.487167" }, { "lng": "121.072632", "lat": "39.524117" }, { "lng": "121.096833", "lat": "39.4925" }, { "lng": "121.07646", "lat": "39.529228" }, { "lng": "121.099167", "lat": "39.497833" }, { "lng": "121.080317", "lat": "39.534368" }, { "lng": "121.084242", "lat": "39.539483" }, { "lng": "121.088648", "lat": "39.54531" }, { "lng": "121.092403", "lat": "39.551687" }, { "lng": "121.095058", "lat": "39.556797" }, { "lng": "121.097805", "lat": "39.562253" }, { "lng": "121.09991", "lat": "39.515668" }, { "lng": "121.098158", "lat": "39.510418" }, { "lng": "121.096408", "lat": "39.505122" }, { "lng": "121.094605", "lat": "39.499863" }, { "lng": "121.092672", "lat": "39.494068" }, { "lng": "121.090992", "lat": "39.488152" }, { "lng": "121.08955", "lat": "39.482823" }, { "lng": "121.08809", "lat": "39.477608" }, { "lng": "121.086642", "lat": "39.472305" }, { "lng": "121.085178", "lat": "39.467018" }, { "lng": "121.083698", "lat": "39.46175" }, { "lng": "121.082218", "lat": "39.456492" }, { "lng": "121.08076", "lat": "39.451258" }, { "lng": "121.066495", "lat": "39.440992" }, { "lng": "121.079192", "lat": "39.446038" }, { "lng": "121.077465", "lat": "39.44077" }, { "lng": "121.068493", "lat": "39.446443" }, { "lng": "121.075727", "lat": "39.435637" }, { "lng": "121.070732", "lat": "39.451728" }, { "lng": "121.073958", "lat": "39.43045" }, { "lng": "121.072962", "lat": "39.456988" }, { "lng": "121.072182", "lat": "39.425297" }, { "lng": "121.070182", "lat": "39.4195" }, { "lng": "121.075223", "lat": "39.462337" }, { "lng": "121.068428", "lat": "39.41444" }, { "lng": "121.077373", "lat": "39.46816" }, { "lng": "121.066603", "lat": "39.409307" }, { "lng": "121.07948", "lat": "39.47352" }, { "lng": "121.08168", "lat": "39.4789" }, { "lng": "121.083827", "lat": "39.484262" }, { "lng": "121.08605", "lat": "39.489587" }, { "lng": "121.08824", "lat": "39.494972" }, { "lng": "121.090347", "lat": "39.500365" }, { "lng": "121.092525", "lat": "39.506138" }, { "lng": "121.094723", "lat": "39.511445" }, { "lng": "121.096843", "lat": "39.51683" }, { "lng": "121.09893", "lat": "39.52212" }, { "lng": "121.08395", "lat": "39.6127" }, { "lng": "121.066332", "lat": "39.550573" }, { "lng": "121.0754", "lat": "39.562092" }, { "lng": "121.080182", "lat": "39.568333" }, { "lng": "121.08657", "lat": "39.57693" }, { "lng": "121.090548", "lat": "39.582115" }, { "lng": "121.095563", "lat": "39.588713" }, { "lng": "121.099628", "lat": "39.48424" }, { "lng": "121.093967", "lat": "39.479035" }, { "lng": "121.088753", "lat": "39.474312" }, { "lng": "121.083083", "lat": "39.469217" }, { "lng": "121.077897", "lat": "39.464552" }, { "lng": "121.072622", "lat": "39.459885" }, { "lng": "121.065748", "lat": "39.499292" }, { "lng": "121.069257", "lat": "39.504368" }, { "lng": "121.072832", "lat": "39.509397" }, { "lng": "121.076397", "lat": "39.514433" }, { "lng": "121.080015", "lat": "39.519512" }, { "lng": "121.084355", "lat": "39.591018" }, { "lng": "121.083617", "lat": "39.524522" }, { "lng": "121.087945", "lat": "39.53054" }, { "lng": "121.09182", "lat": "39.535968" }, { "lng": "121.07456", "lat": "39.578283" }, { "lng": "121.099338", "lat": "39.545222" }, { "lng": "121.070663", "lat": "39.573147" }, { "lng": "121.066608", "lat": "39.567492" }, { "lng": "121.09371", "lat": "39.422088" }, { "lng": "121.088347", "lat": "39.420038" }, { "lng": "121.082885", "lat": "39.418143" }, { "lng": "121.077652", "lat": "39.416148" }, { "lng": "121.072452", "lat": "39.414158" }, { "lng": "121.066975", "lat": "39.412242" }, { "lng": "121.095865", "lat": "39.618458" }, { "lng": "121.090463", "lat": "39.611082" }, { "lng": "121.08555", "lat": "39.603945" }, { "lng": "121.082155", "lat": "39.598395" }, { "lng": "121.078872", "lat": "39.593345" }, { "lng": "121.075103", "lat": "39.586948" }, { "lng": "121.072068", "lat": "39.581883" }, { "lng": "121.068987", "lat": "39.576822" }, { "lng": "121.065953", "lat": "39.571812" }, { "lng": "121.0772", "lat": "39.599183" }, { "lng": "121.0842", "lat": "39.6076" }, { "lng": "121.067808", "lat": "39.405015" }, { "lng": "121.071033", "lat": "39.410457" }, { "lng": "121.07416", "lat": "39.415823" }, { "lng": "121.077305", "lat": "39.421215" }, { "lng": "121.080432", "lat": "39.426595" }, { "lng": "121.083543", "lat": "39.432077" }, { "lng": "121.08661", "lat": "39.43767" }, { "lng": "121.089672", "lat": "39.443122" }, { "lng": "121.092852", "lat": "39.448553" }, { "lng": "121.096002", "lat": "39.45404" }, { "lng": "121.099237", "lat": "39.459528" }, { "lng": "121.100755", "lat": "39.482968" }, { "lng": "121.098987", "lat": "39.477777" }, { "lng": "121.097033", "lat": "39.47261" }, { "lng": "121.065427", "lat": "39.523645" }, { "lng": "121.068393", "lat": "39.528878" }, { "lng": "121.094855", "lat": "39.46741" }, { "lng": "121.071403", "lat": "39.53443" }, { "lng": "121.074343", "lat": "39.539497" }, { "lng": "121.092963", "lat": "39.462202" }, { "lng": "121.077763", "lat": "39.545405" }, { "lng": "121.080845", "lat": "39.550865" }, { "lng": "121.091265", "lat": "39.456902" }, { "lng": "121.083987", "lat": "39.556303" }, { "lng": "121.087168", "lat": "39.56185" }, { "lng": "121.089492", "lat": "39.451613" }, { "lng": "121.090058", "lat": "39.566943" }, { "lng": "121.087777", "lat": "39.446362" }, { "lng": "121.093695", "lat": "39.573417" }, { "lng": "121.099338", "lat": "39.583513" }, { "lng": "121.08608", "lat": "39.441027" }, { "lng": "121.08443", "lat": "39.435668" }, { "lng": "121.082507", "lat": "39.430338" }, { "lng": "121.080443", "lat": "39.425088" }, { "lng": "121.078353", "lat": "39.419962" }, { "lng": "121.076148", "lat": "39.414875" }, { "lng": "121.073698", "lat": "39.40987" }, { "lng": "121.071487", "lat": "39.404798" }, { "lng": "121.069938", "lat": "39.600913" }, { "lng": "121.069533", "lat": "39.399678" }, { "lng": "121.067378", "lat": "39.39459" }, { "lng": "121.065275", "lat": "39.389418" }, { "lng": "121.067312", "lat": "39.501758" }, { "lng": "121.06984", "lat": "39.506952" }, { "lng": "121.072622", "lat": "39.512738" }, { "lng": "121.075145", "lat": "39.517927" }, { "lng": "121.077623", "lat": "39.523113" }, { "lng": "121.08017", "lat": "39.528302" }, { "lng": "121.06841", "lat": "39.532458" }, { "lng": "121.082725", "lat": "39.533607" }, { "lng": "121.071735", "lat": "39.5376" }, { "lng": "121.085263", "lat": "39.538652" }, { "lng": "121.087873", "lat": "39.543957" }, { "lng": "121.07521", "lat": "39.542872" }, { "lng": "121.090487", "lat": "39.548985" }, { "lng": "121.078652", "lat": "39.548148" }, { "lng": "121.093923", "lat": "39.555855" }, { "lng": "121.065217", "lat": "39.549267" }, { "lng": "121.097063", "lat": "39.562128" }, { "lng": "121.069067", "lat": "39.55485" }, { "lng": "121.082763", "lat": "39.555393" }, { "lng": "121.100537", "lat": "39.568963" }, { "lng": "121.0741", "lat": "39.562017" }, { "lng": "121.085808", "lat": "39.560752" }, { "lng": "121.077983", "lat": "39.567667" }, { "lng": "121.089018", "lat": "39.566408" }, { "lng": "121.081367", "lat": "39.5727" }, { "lng": "121.084733", "lat": "39.577733" }, { "lng": "121.092045", "lat": "39.571757" }, { "lng": "121.088133", "lat": "39.582817" }, { "lng": "121.095537", "lat": "39.578005" }, { "lng": "121.096217", "lat": "39.594867" }, { "lng": "121.098423", "lat": "39.583218" }, { "lng": "121.100533", "lat": "39.601067" }, { "lng": "121.065517", "lat": "39.5309" }, { "lng": "121.067883", "lat": "39.536483" }, { "lng": "121.0702", "lat": "39.541633" }, { "lng": "121.072667", "lat": "39.5467" }, { "lng": "121.075133", "lat": "39.5518" }, { "lng": "121.0782", "lat": "39.55825" }, { "lng": "121.081117", "lat": "39.564783" }, { "lng": "121.083367", "lat": "39.569817" }, { "lng": "121.0864", "lat": "39.5768" }, { "lng": "121.095147", "lat": "39.406062" }, { "lng": "121.088368", "lat": "39.403682" }, { "lng": "121.08265", "lat": "39.401658" }, { "lng": "121.098", "lat": "39.6018" }, { "lng": "121.076812", "lat": "39.399612" }, { "lng": "121.071433", "lat": "39.397713" }, { "lng": "121.06619", "lat": "39.395855" }, { "lng": "121.086148", "lat": "39.503472" }, { "lng": "121.093085", "lat": "39.501537" }, { "lng": "121.098497", "lat": "39.499945" }, { "lng": "121.066918", "lat": "39.503043" }, { "lng": "121.069417", "lat": "39.508415" }, { "lng": "121.071748", "lat": "39.51343" }, { "lng": "121.074235", "lat": "39.518843" }, { "lng": "121.076462", "lat": "39.523847" }, { "lng": "121.079155", "lat": "39.529705" }, { "lng": "121.081443", "lat": "39.53471" }, { "lng": "121.083912", "lat": "39.540122" }, { "lng": "121.087193", "lat": "39.547125" }, { "lng": "121.089657", "lat": "39.552477" }, { "lng": "121.092185", "lat": "39.558252" }, { "lng": "121.094967", "lat": "39.564445" }, { "lng": "121.065452", "lat": "39.574185" }, { "lng": "121.066922", "lat": "39.48198" }, { "lng": "121.097302", "lat": "39.569825" }, { "lng": "121.072765", "lat": "39.481635" }, { "lng": "121.099772", "lat": "39.575573" }, { "lng": "121.078825", "lat": "39.481163" }, { "lng": "121.084905", "lat": "39.480688" }, { "lng": "121.090903", "lat": "39.480187" }, { "lng": "121.09689", "lat": "39.479593" }, { "lng": "121.068865", "lat": "39.476798" }, { "lng": "121.076808", "lat": "39.47606" }, { "lng": "121.083232", "lat": "39.475548" }, { "lng": "121.089717", "lat": "39.475088" }, { "lng": "121.09606", "lat": "39.474477" }, { "lng": "121.100815", "lat": "39.56658" }, { "lng": "121.067793", "lat": "39.496862" }, { "lng": "121.095815", "lat": "39.559968" }, { "lng": "121.071387", "lat": "39.503087" }, { "lng": "121.091392", "lat": "39.554187" }, { "lng": "121.075158", "lat": "39.509663" }, { "lng": "121.086958", "lat": "39.548967" }, { "lng": "121.078647", "lat": "39.51562" }, { "lng": "121.099145", "lat": "39.546692" }, { "lng": "121.080858", "lat": "39.54288" }, { "lng": "121.097253", "lat": "39.541282" }, { "lng": "121.081938", "lat": "39.521313" }, { "lng": "121.075657", "lat": "39.538053" }, { "lng": "121.095332", "lat": "39.535702" }, { "lng": "121.085153", "lat": "39.526972" }, { "lng": "121.070252", "lat": "39.533258" }, { "lng": "121.093293", "lat": "39.529745" }, { "lng": "121.090917", "lat": "39.524313" }, { "lng": "121.065743", "lat": "39.527423" }, { "lng": "121.088625", "lat": "39.53303" }, { "lng": "121.088075", "lat": "39.519173" }, { "lng": "121.091488", "lat": "39.538083" }, { "lng": "121.085095", "lat": "39.51384" }, { "lng": "121.094348", "lat": "39.543215" }, { "lng": "121.082195", "lat": "39.508482" }, { "lng": "121.067992", "lat": "39.559892" }, { "lng": "121.078772", "lat": "39.502197" }, { "lng": "121.097345", "lat": "39.548583" }, { "lng": "121.072728", "lat": "39.524795" }, { "lng": "121.07596", "lat": "39.496937" }, { "lng": "121.079013", "lat": "39.522642" }, { "lng": "121.070897", "lat": "39.565243" }, { "lng": "121.10061", "lat": "39.554615" }, { "lng": "121.073163", "lat": "39.491692" }, { "lng": "121.086665", "lat": "39.519672" }, { "lng": "121.07026", "lat": "39.48641" }, { "lng": "121.074", "lat": "39.570915" }, { "lng": "121.092875", "lat": "39.517373" }, { "lng": "121.067158", "lat": "39.48072" }, { "lng": "121.09801", "lat": "39.517023" }, { "lng": "121.076828", "lat": "39.576128" }, { "lng": "121.07962", "lat": "39.58129" }, { "lng": "121.08239", "lat": "39.586538" }, { "lng": "121.100405", "lat": "39.495023" }, { "lng": "121.085035", "lat": "39.59174" }, { "lng": "121.098327", "lat": "39.489702" }, { "lng": "121.09594", "lat": "39.483673" }, { "lng": "121.08762", "lat": "39.596823" }, { "lng": "121.093813", "lat": "39.47821" }, { "lng": "121.091885", "lat": "39.472702" }, { "lng": "121.090302", "lat": "39.602105" }, { "lng": "121.090323", "lat": "39.46762" }, { "lng": "121.088575", "lat": "39.46208" }, { "lng": "121.093025", "lat": "39.607672" }, { "lng": "121.086895", "lat": "39.457013" }, { "lng": "121.085028", "lat": "39.451415" }, { "lng": "121.095087", "lat": "39.61278" }, { "lng": "121.083235", "lat": "39.446262" }, { "lng": "121.081122", "lat": "39.440793" }, { "lng": "121.097227", "lat": "39.617963" }, { "lng": "121.078958", "lat": "39.435277" }, { "lng": "121.065713", "lat": "39.490313" }, { "lng": "121.076773", "lat": "39.429778" }, { "lng": "121.069023", "lat": "39.495378" }, { "lng": "121.074593", "lat": "39.424327" }, { "lng": "121.07236", "lat": "39.418782" }, { "lng": "121.072312", "lat": "39.500473" }, { "lng": "121.069902", "lat": "39.412817" }, { "lng": "121.075807", "lat": "39.505692" }, { "lng": "121.067655", "lat": "39.407382" }, { "lng": "121.078652", "lat": "39.51077" }, { "lng": "121.065407", "lat": "39.401875" }, { "lng": "121.081493", "lat": "39.516048" }, { "lng": "121.084378", "lat": "39.521232" }, { "lng": "121.087237", "lat": "39.526563" }, { "lng": "121.090073", "lat": "39.53191" }, { "lng": "121.092763", "lat": "39.536913" }, { "lng": "121.095897", "lat": "39.542633" }, { "lng": "121.06746", "lat": "39.465218" }, { "lng": "121.098875", "lat": "39.547942" }, { "lng": "121.070403", "lat": "39.470935" }, { "lng": "121.072933", "lat": "39.476125" }, { "lng": "121.09935", "lat": "39.597168" }, { "lng": "121.075727", "lat": "39.481815" }, { "lng": "121.096258", "lat": "39.591173" }, { "lng": "121.078722", "lat": "39.48752" }, { "lng": "121.093892", "lat": "39.585618" }, { "lng": "121.091673", "lat": "39.580247" }, { "lng": "121.081623", "lat": "39.4932" }, { "lng": "121.086857", "lat": "39.57444" }, { "lng": "121.081988", "lat": "39.569427" }, { "lng": "121.084452", "lat": "39.49868" }, { "lng": "121.076998", "lat": "39.564347" }, { "lng": "121.072068", "lat": "39.559345" }, { "lng": "121.08743", "lat": "39.50445" }, { "lng": "121.06714", "lat": "39.554248" }, { "lng": "121.090173", "lat": "39.50952" }, { "lng": "121.093203", "lat": "39.515213" }, { "lng": "121.065998", "lat": "39.523667" }, { "lng": "121.096253", "lat": "39.520973" }, { "lng": "121.069267", "lat": "39.528783" }, { "lng": "121.072533", "lat": "39.534033" }, { "lng": "121.098873", "lat": "39.526022" }, { "lng": "121.0762", "lat": "39.539982" }, { "lng": "121.08275", "lat": "39.5509" }, { "lng": "121.09065", "lat": "39.564133" }, { "lng": "121.097305", "lat": "39.58634" }, { "lng": "121.091403", "lat": "39.578" }, { "lng": "121.087365", "lat": "39.572535" }, { "lng": "121.083313", "lat": "39.566987" }, { "lng": "121.079537", "lat": "39.561878" }, { "lng": "121.07489", "lat": "39.555482" }, { "lng": "121.0705", "lat": "39.549592" }, { "lng": "121.066313", "lat": "39.54424" }, { "lng": "121.084387", "lat": "39.552395" }, { "lng": "121.07778", "lat": "39.539353" }, { "lng": "121.074965", "lat": "39.533782" }, { "lng": "121.072093", "lat": "39.527758" }, { "lng": "121.06954", "lat": "39.52214" }, { "lng": "121.067247", "lat": "39.51696" } ] }, { "value": 1, "lnglat": [ { "lng": "121.074918", "lat": "40.800965" }, { "lng": "121.072008", "lat": "40.798783" }, { "lng": "121.068048", "lat": "40.802352" }, { "lng": "121.069687", "lat": "40.79509" }, { "lng": "121.074865", "lat": "40.795795" }, { "lng": "121.075775", "lat": "40.79575" }, { "lng": "121.070883", "lat": "40.795667" }, { "lng": "121.065217", "lat": "40.793367" }, { "lng": "121.068437", "lat": "40.801417" }, { "lng": "121.076792", "lat": "40.796098" }, { "lng": "121.070923", "lat": "40.798777" }, { "lng": "121.066688", "lat": "40.798362" }, { "lng": "121.065338", "lat": "40.798033" }, { "lng": "121.070792", "lat": "40.79536" }, { "lng": "121.068555", "lat": "40.801347" }, { "lng": "121.07595", "lat": "40.796198" }, { "lng": "121.069005", "lat": "40.79785" }, { "lng": "121.06967", "lat": "40.79944" }, { "lng": "121.069032", "lat": "40.794745" }, { "lng": "121.074382", "lat": "40.796622" }, { "lng": "121.067633", "lat": "40.794333" }, { "lng": "121.072967", "lat": "40.795883" }, { "lng": "121.06558", "lat": "40.806053" }, { "lng": "121.067998", "lat": "40.802343" }, { "lng": "121.075745", "lat": "40.795805" }, { "lng": "121.07573", "lat": "40.795912" }, { "lng": "121.07683", "lat": "40.79613" }, { "lng": "121.06835", "lat": "40.801505" }, { "lng": "121.076758", "lat": "40.796185" }, { "lng": "121.068518", "lat": "40.801337" }, { "lng": "121.070128", "lat": "40.795015" }, { "lng": "121.076273", "lat": "40.79596" }, { "lng": "121.076257", "lat": "40.796077" }, { "lng": "121.06559", "lat": "40.80611" }, { "lng": "121.06557", "lat": "40.798248" }, { "lng": "121.070632", "lat": "40.79992" }, { "lng": "121.068008", "lat": "40.802312" }, { "lng": "121.070872", "lat": "40.795068" }, { "lng": "121.065522", "lat": "40.793853" }, { "lng": "121.070305", "lat": "40.795175" }, { "lng": "121.069695", "lat": "40.795165" }, { "lng": "121.074895", "lat": "40.795763" }, { "lng": "121.076812", "lat": "40.796135" }, { "lng": "121.068253", "lat": "40.801598" }, { "lng": "121.076747", "lat": "40.7962" }, { "lng": "121.069055", "lat": "40.79454" }, { "lng": "121.074692", "lat": "40.795548" }, { "lng": "121.068547", "lat": "40.801327" }, { "lng": "121.068688", "lat": "40.794928" }, { "lng": "121.071212", "lat": "40.796172" }, { "lng": "121.073975", "lat": "40.796122" }, { "lng": "121.076227", "lat": "40.79614" }, { "lng": "121.075163", "lat": "40.800727" }, { "lng": "121.06559", "lat": "40.80606" }, { "lng": "121.067872", "lat": "40.802255" }, { "lng": "121.075727", "lat": "40.795872" }, { "lng": "121.076805", "lat": "40.796102" }, { "lng": "121.076782", "lat": "40.796167" }, { "lng": "121.068548", "lat": "40.801317" }, { "lng": "121.075747", "lat": "40.795775" }, { "lng": "121.076243", "lat": "40.795985" }, { "lng": "121.076267", "lat": "40.796097" }, { "lng": "121.071435", "lat": "40.795408" }, { "lng": "121.066297", "lat": "40.794022" }, { "lng": "121.071568", "lat": "40.79565" }, { "lng": "121.065863", "lat": "40.793907" }, { "lng": "121.065583", "lat": "40.806093" }, { "lng": "121.075152", "lat": "40.80071" }, { "lng": "121.065835", "lat": "40.794028" }, { "lng": "121.072455", "lat": "40.79614" }, { "lng": "121.075748", "lat": "40.795887" }, { "lng": "121.068533", "lat": "40.801328" }, { "lng": "121.07573", "lat": "40.795792" }, { "lng": "121.076258", "lat": "40.795948" }, { "lng": "121.070482", "lat": "40.795558" }, { "lng": "121.076247", "lat": "40.796027" }, { "lng": "121.071197", "lat": "40.790403" }, { "lng": "121.074865", "lat": "40.785117" }, { "lng": "121.068607", "lat": "40.794642" }, { "lng": "121.073792", "lat": "40.796002" }, { "lng": "121.065565", "lat": "40.806073" }, { "lng": "121.075168", "lat": "40.800712" }, { "lng": "121.06961", "lat": "40.800445" }, { "lng": "121.0768", "lat": "40.796108" }, { "lng": "121.069813", "lat": "40.795387" }, { "lng": "121.075398", "lat": "40.795895" }, { "lng": "121.068562", "lat": "40.801332" }, { "lng": "121.075742", "lat": "40.795787" }, { "lng": "121.076287", "lat": "40.796005" }, { "lng": "121.076243", "lat": "40.796072" }, { "lng": "121.076763", "lat": "40.796178" }, { "lng": "121.06559", "lat": "40.806107" }, { "lng": "121.075168", "lat": "40.800712" }, { "lng": "121.066395", "lat": "40.799247" }, { "lng": "121.07078", "lat": "40.800145" }, { "lng": "121.076823", "lat": "40.796092" }, { "lng": "121.075732", "lat": "40.795878" }, { "lng": "121.075777", "lat": "40.795775" }, { "lng": "121.068565", "lat": "40.801352" }, { "lng": "121.07629", "lat": "40.795968" }, { "lng": "121.07024", "lat": "40.795105" }, { "lng": "121.065162", "lat": "40.792468" }, { "lng": "121.076282", "lat": "40.796088" }, { "lng": "121.076773", "lat": "40.796197" }, { "lng": "121.075167", "lat": "40.800712" }, { "lng": "121.065592", "lat": "40.806057" }, { "lng": "121.067925", "lat": "40.802433" }, { "lng": "121.071983", "lat": "40.798718" }, { "lng": "121.0714", "lat": "40.795805" }, { "lng": "121.069393", "lat": "40.794687" }, { "lng": "121.065973", "lat": "40.79406" }, { "lng": "121.074428", "lat": "40.795877" }, { "lng": "121.068045", "lat": "40.802088" }, { "lng": "121.075742", "lat": "40.795745" }, { "lng": "121.068557", "lat": "40.801355" }, { "lng": "121.076285", "lat": "40.795972" }, { "lng": "121.076275", "lat": "40.796068" }, { "lng": "121.065822", "lat": "40.798192" } ] }, { "value": 2, "lnglat": [ { "lng": "121.068007", "lat": "40.707635" }, { "lng": "121.06559", "lat": "40.72426" }, { "lng": "121.096", "lat": "40.68395" }, { "lng": "121.069525", "lat": "40.718418" }, { "lng": "121.090733", "lat": "40.686633" }, { "lng": "121.073147", "lat": "40.712923" }, { "lng": "121.076413", "lat": "40.70737" }, { "lng": "121.085417", "lat": "40.6894" }, { "lng": "121.096887", "lat": "40.700305" }, { "lng": "121.079402", "lat": "40.700815" }, { "lng": "121.080217", "lat": "40.6927" }, { "lng": "121.079903", "lat": "40.695793" }, { "lng": "121.074827", "lat": "40.696727" }, { "lng": "121.075083", "lat": "40.6962" }, { "lng": "121.069983", "lat": "40.700217" }, { "lng": "121.0659", "lat": "40.729137" }, { "lng": "121.071382", "lat": "40.728167" }, { "lng": "121.078102", "lat": "40.72696" }, { "lng": "121.084028", "lat": "40.725955" }, { "lng": "121.089375", "lat": "40.725063" }, { "lng": "121.094522", "lat": "40.72423" }, { "lng": "121.065995", "lat": "40.714023" }, { "lng": "121.080203", "lat": "40.70147" }, { "lng": "121.07035", "lat": "40.709833" }, { "lng": "121.089183", "lat": "40.694133" }, { "lng": "121.077917", "lat": "40.70215" }, { "lng": "121.090633", "lat": "40.69045" }, { "lng": "121.097123", "lat": "40.700315" }, { "lng": "121.069205", "lat": "40.712088" }, { "lng": "121.07437", "lat": "40.707243" }, { "lng": "121.080007", "lat": "40.701862" }, { "lng": "121.088668", "lat": "40.693617" }, { "lng": "121.09669", "lat": "40.68682" }, { "lng": "121.06657", "lat": "40.721845" }, { "lng": "121.077035", "lat": "40.719767" }, { "lng": "121.098538", "lat": "40.713648" }, { "lng": "121.093148", "lat": "40.71403" }, { "lng": "121.088118", "lat": "40.715118" }, { "lng": "121.082342", "lat": "40.717425" }, { "lng": "121.075403", "lat": "40.720007" }, { "lng": "121.067888", "lat": "40.72247" }, { "lng": "121.099098", "lat": "40.694013" }, { "lng": "121.09383", "lat": "40.697277" }, { "lng": "121.088483", "lat": "40.70051" }, { "lng": "121.082615", "lat": "40.704023" }, { "lng": "121.07739", "lat": "40.707198" }, { "lng": "121.0701", "lat": "40.711878" }, { "lng": "121.098255", "lat": "40.722948" }, { "lng": "121.068582", "lat": "40.730565" }, { "lng": "121.096797", "lat": "40.700427" }, { "lng": "121.07395", "lat": "40.72964" }, { "lng": "121.082095", "lat": "40.728558" }, { "lng": "121.087582", "lat": "40.7281" }, { "lng": "121.093048", "lat": "40.727562" }, { "lng": "121.07335", "lat": "40.707228" }, { "lng": "121.067788", "lat": "40.71129" }, { "lng": "121.096385", "lat": "40.720867" }, { "lng": "121.094795", "lat": "40.697863" }, { "lng": "121.067533", "lat": "40.732063" }, { "lng": "121.073655", "lat": "40.73119" }, { "lng": "121.065395", "lat": "40.73343" }, { "lng": "121.082292", "lat": "40.731077" }, { "lng": "121.070492", "lat": "40.733398" }, { "lng": "121.08812", "lat": "40.730685" }, { "lng": "121.075537", "lat": "40.733483" }, { "lng": "121.08501", "lat": "40.733648" }, { "lng": "121.090597", "lat": "40.73371" }, { "lng": "121.096812", "lat": "40.733713" }, { "lng": "121.092442", "lat": "40.727012" }, { "lng": "121.067197", "lat": "40.690503" }, { "lng": "121.07392", "lat": "40.690142" }, { "lng": "121.096827", "lat": "40.722362" }, { "lng": "121.079433", "lat": "40.689867" }, { "lng": "121.084487", "lat": "40.689613" }, { "lng": "121.089538", "lat": "40.68939" }, { "lng": "121.094593", "lat": "40.689185" }, { "lng": "121.099645", "lat": "40.689" }, { "lng": "121.0965", "lat": "40.700593" }, { "lng": "121.091458", "lat": "40.699388" }, { "lng": "121.086212", "lat": "40.700702" }, { "lng": "121.080935", "lat": "40.702263" }, { "lng": "121.075712", "lat": "40.705568" }, { "lng": "121.070683", "lat": "40.708825" }, { "lng": "121.065552", "lat": "40.710578" }, { "lng": "121.0983", "lat": "40.722672" }, { "lng": "121.066367", "lat": "40.684233" }, { "lng": "121.0676", "lat": "40.68945" }, { "lng": "121.068783", "lat": "40.69455" }, { "lng": "121.069967", "lat": "40.699967" }, { "lng": "121.06615", "lat": "40.70535" }, { "lng": "121.095562", "lat": "40.730208" }, { "lng": "121.090068", "lat": "40.730605" }, { "lng": "121.08465", "lat": "40.731003" }, { "lng": "121.079417", "lat": "40.731937" }, { "lng": "121.076252", "lat": "40.736985" }, { "lng": "121.071237", "lat": "40.741972" }, { "lng": "121.066073", "lat": "40.73732" }, { "lng": "121.094352", "lat": "40.718817" }, { "lng": "121.088253", "lat": "40.720072" }, { "lng": "121.081418", "lat": "40.72144" }, { "lng": "121.075092", "lat": "40.72219" }, { "lng": "121.079007", "lat": "40.704865" }, { "lng": "121.097707", "lat": "40.722772" }, { "lng": "121.10013", "lat": "40.688217" }, { "lng": "121.096165", "lat": "40.728812" }, { "lng": "121.09054", "lat": "40.72883" }, { "lng": "121.085103", "lat": "40.72888" }, { "lng": "121.079632", "lat": "40.729047" }, { "lng": "121.07271", "lat": "40.730148" }, { "lng": "121.067642", "lat": "40.731485" }, { "lng": "121.097843", "lat": "40.696372" }, { "lng": "121.097012", "lat": "40.720598" }, { "lng": "121.088168", "lat": "40.67925" }, { "lng": "121.092213", "lat": "40.68437" }, { "lng": "121.069675", "lat": "40.696423" }, { "lng": "121.09581", "lat": "40.689558" }, { "lng": "121.100628", "lat": "40.718315" }, { "lng": "121.065725", "lat": "40.721415" }, { "lng": "121.094535", "lat": "40.718852" }, { "lng": "121.088997", "lat": "40.7195" }, { "lng": "121.074828", "lat": "40.72125" }, { "lng": "121.083823", "lat": "40.719882" }, { "lng": "121.080623", "lat": "40.719695" }, { "lng": "121.078763", "lat": "40.72188" }, { "lng": "121.07267", "lat": "40.721877" }, { "lng": "121.073635", "lat": "40.723292" }, { "lng": "121.100067", "lat": "40.680783" }, { "lng": "121.09755", "lat": "40.68605" }, { "lng": "121.099007", "lat": "40.701485" }, { "lng": "121.093678", "lat": "40.703603" }, { "lng": "121.097083", "lat": "40.691883" }, { "lng": "121.088093", "lat": "40.705475" }, { "lng": "121.082987", "lat": "40.70722" }, { "lng": "121.07782", "lat": "40.708945" }, { "lng": "121.096433", "lat": "40.696967" }, { "lng": "121.072568", "lat": "40.710763" }, { "lng": "121.066938", "lat": "40.713123" }, { "lng": "121.0914", "lat": "40.698283" }, { "lng": "121.085567", "lat": "40.6981" }, { "lng": "121.080533", "lat": "40.698217" }, { "lng": "121.07545", "lat": "40.7" } ] }, { "value": 3, "lnglat": [ { "lng": "121.065865", "lat": "39.362575" }, { "lng": "121.09108", "lat": "39.36375" }, { "lng": "121.085787", "lat": "39.361387" }, { "lng": "121.079667", "lat": "39.360057" }, { "lng": "121.07444", "lat": "39.359413" }, { "lng": "121.069293", "lat": "39.35878" }, { "lng": "121.077675", "lat": "39.351868" }, { "lng": "121.080368", "lat": "39.357503" }, { "lng": "121.082788", "lat": "39.362518" }, { "lng": "121.088782", "lat": "39.374488" }, { "lng": "121.08395", "lat": "39.375933" }, { "lng": "121.0783", "lat": "39.372083" }, { "lng": "121.072717", "lat": "39.36815" }, { "lng": "121.067367", "lat": "39.362633" }, { "lng": "121.075438", "lat": "39.352445" }, { "lng": "121.07799", "lat": "39.357698" }, { "lng": "121.080457", "lat": "39.363022" }, { "lng": "121.08301", "lat": "39.368255" }, { "lng": "121.085537", "lat": "39.373558" } ] }, { "value": -1, "lnglat": [ { "lng": "121.0678", "lat": "39.73396" }, { "lng": "121.073388", "lat": "39.738547" }, { "lng": "121.078803", "lat": "39.742987" }, { "lng": "121.084223", "lat": "39.747453" }, { "lng": "121.090855", "lat": "39.752898" }, { "lng": "121.088952", "lat": "39.63301" }, { "lng": "121.091767", "lat": "39.640242" }, { "lng": "121.09647", "lat": "39.65104" }, { "lng": "121.100642", "lat": "39.660632" }, { "lng": "121.072865", "lat": "39.383527" }, { "lng": "121.071098", "lat": "39.37836" }, { "lng": "121.069432", "lat": "39.373083" }, { "lng": "121.067623", "lat": "39.367832" }, { "lng": "121.096733", "lat": "39.36836" }, { "lng": "121.098673", "lat": "39.679093" }, { "lng": "121.092607", "lat": "39.672443" }, { "lng": "121.0869", "lat": "39.666153" }, { "lng": "121.100038", "lat": "39.652148" }, { "lng": "121.079747", "lat": "39.658342" }, { "lng": "121.074635", "lat": "39.652713" }, { "lng": "121.086737", "lat": "39.636018" }, { "lng": "121.069902", "lat": "39.647505" }, { "lng": "121.080088", "lat": "40.596352" }, { "lng": "121.079058", "lat": "40.60152" }, { "lng": "121.077925", "lat": "40.606962" }, { "lng": "121.076815", "lat": "40.612653" }, { "lng": "121.07576", "lat": "40.61776" }, { "lng": "121.07448", "lat": "40.62393" }, { "lng": "121.073143", "lat": "40.630287" }, { "lng": "121.071907", "lat": "40.63653" }, { "lng": "121.07065", "lat": "40.64253" }, { "lng": "121.069572", "lat": "40.647558" }, { "lng": "121.099617", "lat": "39.62628" }, { "lng": "121.068333", "lat": "40.653355" }, { "lng": "121.067127", "lat": "40.65879" }, { "lng": "121.06591", "lat": "40.664207" }, { "lng": "121.068447", "lat": "39.647823" }, { "lng": "121.074015", "lat": "39.653122" }, { "lng": "121.082782", "lat": "39.661575" }, { "lng": "121.089212", "lat": "39.667712" }, { "lng": "121.096012", "lat": "39.674263" }, { "lng": "121.0916", "lat": "39.682733" }, { "lng": "121.08886", "lat": "39.744477" }, { "lng": "121.08319", "lat": "39.739277" }, { "lng": "121.07799", "lat": "39.734478" }, { "lng": "121.072737", "lat": "39.729653" }, { "lng": "121.065752", "lat": "39.723118" }, { "lng": "121.090043", "lat": "40.847133" }, { "lng": "121.096587", "lat": "39.323803" }, { "lng": "121.093587", "lat": "39.318043" }, { "lng": "121.092733", "lat": "39.312793" }, { "lng": "121.0697", "lat": "39.33421" }, { "lng": "121.089707", "lat": "39.307567" }, { "lng": "121.072083", "lat": "39.33957" }, { "lng": "121.08452", "lat": "39.304363" }, { "lng": "121.079213", "lat": "39.299637" }, { "lng": "121.074333", "lat": "39.294387" }, { "lng": "121.06948", "lat": "39.28907" }, { "lng": "121.067755", "lat": "39.221565" }, { "lng": "121.092972", "lat": "39.382897" }, { "lng": "121.071135", "lat": "39.227322" }, { "lng": "121.095285", "lat": "39.388492" }, { "lng": "121.074263", "lat": "39.232547" }, { "lng": "121.077425", "lat": "39.237758" }, { "lng": "121.08059", "lat": "39.242942" }, { "lng": "121.08402", "lat": "39.248477" }, { "lng": "121.08715", "lat": "39.253565" }, { "lng": "121.09049", "lat": "39.259048" }, { "lng": "121.09439", "lat": "39.26542" }, { "lng": "121.0975", "lat": "39.27047" }, { "lng": "121.100733", "lat": "39.387317" }, { "lng": "121.095167", "lat": "39.38335" }, { "lng": "121.089333", "lat": "39.3798" }, { "lng": "121.100333", "lat": "40.780333" }, { "lng": "121.095173", "lat": "40.785333" }, { "lng": "121.100507", "lat": "40.781833" }, { "lng": "121.065905", "lat": "39.331125" }, { "lng": "121.068298", "lat": "39.33647" }, { "lng": "121.07066", "lat": "39.34183" }, { "lng": "121.072955", "lat": "39.347177" }, { "lng": "121.088115", "lat": "39.378797" }, { "lng": "121.090703", "lat": "39.38403" }, { "lng": "121.093278", "lat": "39.3893" }, { "lng": "121.096202", "lat": "39.394927" }, { "lng": "121.099133", "lat": "39.400652" }, { "lng": "121.084122", "lat": "39.701452" }, { "lng": "121.08642", "lat": "39.659863" }, { "lng": "121.09889", "lat": "39.67388" }, { "lng": "121.068422", "lat": "39.454883" }, { "lng": "121.074233", "lat": "39.162567" }, { "lng": "121.070333", "lat": "39.743333" }, { "lng": "121.0685", "lat": "39.738167" }, { "lng": "121.066333", "lat": "39.732333" }, { "lng": "121.098988", "lat": "39.424428" }, { "lng": "121.082177", "lat": "38.934753" }, { "lng": "121.098632", "lat": "38.949745" }, { "lng": "121.068123", "lat": "39.20895" }, { "lng": "121.071483", "lat": "39.214282" }, { "lng": "121.065912", "lat": "40.649925" }, { "lng": "121.074827", "lat": "39.2197" }, { "lng": "121.0781", "lat": "39.224955" }, { "lng": "121.066763", "lat": "40.644713" }, { "lng": "121.081403", "lat": "39.230312" }, { "lng": "121.067667", "lat": "40.639025" }, { "lng": "121.08465", "lat": "39.23561" }, { "lng": "121.087882", "lat": "39.240948" }, { "lng": "121.068663", "lat": "40.633752" }, { "lng": "121.091487", "lat": "39.246882" }, { "lng": "121.069675", "lat": "40.62857" }, { "lng": "121.095018", "lat": "39.252698" }, { "lng": "121.070578", "lat": "40.623255" }, { "lng": "121.09827", "lat": "39.25806" }, { "lng": "121.0714", "lat": "40.618042" }, { "lng": "121.07245", "lat": "40.611988" }, { "lng": "121.073425", "lat": "40.606382" }, { "lng": "121.074725", "lat": "40.59852" }, { "lng": "121.07555", "lat": "40.593322" }, { "lng": "121.076437", "lat": "40.58766" }, { "lng": "121.077592", "lat": "40.580947" }, { "lng": "121.080212", "lat": "40.566408" }, { "lng": "121.081125", "lat": "40.560852" }, { "lng": "121.081963", "lat": "40.55565" }, { "lng": "121.06515", "lat": "40.6791" }, { "lng": "121.070667", "lat": "39.628667" }, { "lng": "121.076333", "lat": "39.634333" }, { "lng": "121.081667", "lat": "39.6395" }, { "lng": "121.087333", "lat": "39.645333" }, { "lng": "121.093333", "lat": "39.651167" }, { "lng": "121.099167", "lat": "39.657167" }, { "lng": "121.097467", "lat": "39.33895" }, { "lng": "121.065805", "lat": "39.232702" }, { "lng": "121.093017", "lat": "39.333783" }, { "lng": "121.068668", "lat": "39.237713" }, { "lng": "121.088517", "lat": "39.328583" }, { "lng": "121.071645", "lat": "39.24279" }, { "lng": "121.08405", "lat": "39.323333" }, { "lng": "121.074745", "lat": "39.247968" }, { "lng": "121.079883", "lat": "39.318067" }, { "lng": "121.077823", "lat": "39.253008" }, { "lng": "121.075683", "lat": "39.31285" }, { "lng": "121.08087", "lat": "39.258013" }, { "lng": "121.071717", "lat": "39.307667" }, { "lng": "121.08428", "lat": "39.263467" }, { "lng": "121.067583", "lat": "39.302283" }, { "lng": "121.087715", "lat": "39.268943" }, { "lng": "121.091357", "lat": "39.274783" }, { "lng": "121.094548", "lat": "39.279922" }, { "lng": "121.097797", "lat": "39.284945" }, { "lng": "121.080735", "lat": "38.935438" }, { "lng": "121.100347", "lat": "39.407898" }, { "lng": "121.098192", "lat": "39.734065" }, { "lng": "121.09314", "lat": "39.7304" }, { "lng": "121.087602", "lat": "39.726402" }, { "lng": "121.082468", "lat": "39.722662" }, { "lng": "121.07739", "lat": "39.71899" }, { "lng": "121.072325", "lat": "39.715287" }, { "lng": "121.06707", "lat": "39.711463" }, { "lng": "121.089117", "lat": "39.746892" }, { "lng": "121.0684", "lat": "40.670657" }, { "lng": "121.078258", "lat": "40.668833" }, { "lng": "121.098598", "lat": "39.154838" }, { "lng": "121.092637", "lat": "39.15138" }, { "lng": "121.087608", "lat": "39.149148" }, { "lng": "121.078125", "lat": "39.143292" }, { "lng": "121.06785", "lat": "39.683903" }, { "lng": "121.069793", "lat": "39.138532" }, { "lng": "121.072383", "lat": "39.68902" }, { "lng": "121.076908", "lat": "39.694103" }, { "lng": "121.081457", "lat": "39.699225" }, { "lng": "121.086387", "lat": "39.704767" }, { "lng": "121.090953", "lat": "39.709845" }, { "lng": "121.095543", "lat": "39.714987" }, { "lng": "121.099993", "lat": "39.720012" }, { "lng": "121.065543", "lat": "39.62201" }, { "lng": "121.0983", "lat": "39.1572" }, { "lng": "121.09956", "lat": "39.623673" }, { "lng": "121.071047", "lat": "39.628613" }, { "lng": "121.075503", "lat": "39.633968" }, { "lng": "121.079712", "lat": "39.639032" }, { "lng": "121.096967", "lat": "39.020267" }, { "lng": "121.085153", "lat": "39.645642" }, { "lng": "121.091833", "lat": "39.019117" }, { "lng": "121.089702", "lat": "39.651123" }, { "lng": "121.094175", "lat": "39.656525" }, { "lng": "121.098688", "lat": "39.661978" }, { "lng": "121.07365", "lat": "39.0148" }, { "lng": "121.097317", "lat": "40.6648" }, { "lng": "121.075502", "lat": "40.658088" }, { "lng": "121.080952", "lat": "40.66373" }, { "lng": "121.084047", "lat": "40.669088" }, { "lng": "121.085058", "lat": "40.674215" }, { "lng": "121.091222", "lat": "40.67235" }, { "lng": "121.079025", "lat": "40.639777" }, { "lng": "121.0995", "lat": "39.7225" }, { "lng": "121.094333", "lat": "39.7175" }, { "lng": "121.089167", "lat": "39.712333" }, { "lng": "121.083833", "lat": "39.707667" }, { "lng": "121.078333", "lat": "39.703" }, { "lng": "121.073167", "lat": "39.6985" }, { "lng": "121.067333", "lat": "39.6935" } ] } ]
        return res

class getData(Resource):
    def get(self):
        shipinfo = ShipInfo.query.filter_by(mmsi=98506108)
        infos = []
        for i in shipinfo:
            info = {}
            info.update(mmsi=i.mmsi, source=i.source, shipType=i.shipType)
            infos.append(info)
        return {'info': infos}

class getPos(Resource):
    def get(self):
        # pos = Pos.query.filter_by(updatetime=1502354830)
        pos = Pos.query.filter_by(mmsi=235070199)
        data = []
        for i in pos:
            info = {}
            info.update(id=i.ROWID,mmsi=i.mmsi, source=i.source, lat=intToCoordinate(i.Lat), lon=intToCoordinate(i.Lon), sog=i.Sog,cog=i.Cog, hdg=i.Hdg, rot=i.Rot, navastaus=i.Navastaus, updatetime=i.UpdateTime)
            info.update(inserttime=i.InsertTime.strftime('%Y-%m-%d %H:%M:%S'))
            data.append(info)
        return {'pos': data}

# 根据mmsi选取数据
class getLnglatByMmsi(Resource):
    def get(self):
        pos = Pos.query.filter_by(mmsi=431008147)
        lnglat = []
        for i in pos:
            lng = intToCoordinate(i.Lon)
            lat = intToCoordinate(i.Lat)
            info = {'lng': lng, 'lat': lat}
            lnglat.append(info)
        # return {'mmsi': pos[1].mmsi, 'lnglat': lnglat}
        return [{'value': 1, 'lnglat': lnglat}]

# 根据矩形范围（经纬度）获取数据
class getDataByRectangle(Resource):
    def post(self):
        parser = reqparse.RequestParser()
        parser.add_argument('task', type=str)
        parser.add_argument('lnglat_top_left', type=str, required=True)
        parser.add_argument('lnglat_bottom_right', type=str, required=True)
        args = parser.parse_args()
        point1 = args['lnglat_top_left']
        point2 = args['lnglat_bottom_right']

        point1_lng = CoordinateToInt(point1.split(',')[0])
        point1_lat = CoordinateToInt(point1.split(',')[1]) 
        point2_lng = CoordinateToInt(point2.split(',')[0]) 
        point2_lat = CoordinateToInt(point2.split(',')[1]) 
        pos = Pos.query.filter(and_(Pos.Lat > point2_lat, Pos.Lat < point1_lat, Pos.Lon > point1_lng, Pos.Lon < point2_lng))
        
        lnglat = []
        number = 0
        for i in pos:
            lng = intToCoordinate(i.Lon)
            lat = intToCoordinate(i.Lat)
            info = {'lng': lng, 'lat': lat}
            lnglat.append(info)
            number +=1
        return [{'number': number, 'lnglat': lnglat}]

# 计算给定矩形范围（经纬度）内所有点的DBSCAN
# 数据输出格式适用于在vue-bmap海量点组件中使用
class calcDbscanByRectangle(Resource):
    def post(self):
        parser = reqparse.RequestParser()
        parser.add_argument('task', type=str)
        parser.add_argument('lnglat_top_left', type=str, required=True)
        parser.add_argument('lnglat_bottom_right', type=str, required=True)
        parser.add_argument('eps', type=int, required=True)
        parser.add_argument('minpts', type=int, required=True)
        args = parser.parse_args()
        point1 = args['lnglat_top_left']
        point2 = args['lnglat_bottom_right']
        eps = args['eps']
        minpts = args['minpts']

        point1_lng = CoordinateToInt(point1.split(',')[0])
        point1_lat = CoordinateToInt(point1.split(',')[1]) 
        point2_lng = CoordinateToInt(point2.split(',')[0]) 
        point2_lat = CoordinateToInt(point2.split(',')[1])

        points_list = []
        pos = Pos.query.filter(and_(Pos.Lat > point2_lat, Pos.Lat < point1_lat, Pos.Lon > point1_lng, Pos.Lon < point2_lng))
        for i in pos:
            point_list = [intToCoordinate(i.Lon), intToCoordinate(i.Lat)]
            points_list.append(point_list)

        res = dbscan_bmap(points_list, eps, minpts)

        return res

api_data.add_resource(Hello, '/test_data')
api_data.add_resource(getData, '/get_data')
api_data.add_resource(getPos, '/get_pos')
api_data.add_resource(getLnglatByMmsi, '/get_lnglat_by_mmsi')
# api_data.add_resource(getDataByLnglat, '/get_data_by_lnglat')
api_data.add_resource(getDataByRectangle, '/get_data_by_rectangle')
api_data.add_resource(calcDbscanByRectangle, '/calc_dbscan_by_rectangle')

